{
  "Version": "2019-10-30",
  "StartAction": "CheckIfMediaStreamingStarted",
  "Metadata": {
    "entryPointPosition": {
      "x": 40,
      "y": 40
    },
    "ActionMetadata": {
      "b17292d8-e828-4110-ad5c-7b35ad48bc73": {
        "position": {
          "x": 745.6,
          "y": 1516.8
        }
      },
      "c78f56bf-b6d0-477d-b1f7-de15b88cfa18": {
        "position": {
          "x": 1552.8,
          "y": 895.2
        }
      },
      "SetErrorMessage2": {
        "position": {
          "x": 1900.8,
          "y": 598.4
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "SetDispositionTransferToAgent": {
        "position": {
          "x": 3156,
          "y": -876.8
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "9c7b3530-d748-4efe-9a10-77fcf798042f": {
        "position": {
          "x": 4234.4,
          "y": -197.6
        }
      },
      "dd28ca32-d638-49e9-8825-9de55be49cea": {
        "position": {
          "x": 4012.8,
          "y": -519.2
        }
      },
      "SetDispositionDisengage": {
        "position": {
          "x": 3180,
          "y": -293.6
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "SetDispositionTransferToSystem": {
        "position": {
          "x": 3180.8,
          "y": -626.4
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "DidModuleStartMediaStreaming2": {
        "position": {
          "x": 3784,
          "y": -473.6
        },
        "isFriendlyName": true,
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "cc2ab592-e23b-4482-8d9f-35a3148b3e2a",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "1"
          }
        ]
      },
      "ExtractOutputVariables": {
        "position": {
          "x": 3503.2,
          "y": 32.8
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "SetErrorMessage3": {
        "position": {
          "x": 2151.2,
          "y": 592
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97": {
        "position": {
          "x": 320.8,
          "y": 1445.6
        },
        "dynamicParams": []
      },
      "Set Started_Media_1": {
        "position": {
          "x": 276,
          "y": 390.4
        },
        "isFriendlyName": true
      },
      "CheckIfMediaStreamingStarted": {
        "position": {
          "x": 188.8,
          "y": 38.4
        },
        "isFriendlyName": true,
        "conditionMetadata": [
          {
            "id": "5a18620e-d389-4dc5-ab2e-3ed488d86036",
            "operator": {
              "name": "Contains",
              "value": "Contains",
              "shortDisplay": "contains"
            },
            "value": "arn:aws"
          }
        ]
      },
      "ClearAgentProcessing": {
        "position": {
          "x": 2144,
          "y": 239.2
        },
        "isFriendlyName": true
      },
      "SpeakResponse": {
        "position": {
          "x": 2226.4,
          "y": -554.4
        },
        "isFriendlyName": true,
        "parameters": {
          "Text": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "SetAgentProcessing": {
        "position": {
          "x": 2148,
          "y": 52
        },
        "isFriendlyName": true
      },
      "32cb9b6f-b1ae-4c26-8cee-c61fe450b996": {
        "position": {
          "x": 516.8,
          "y": 391.2
        },
        "toCustomer": false,
        "fromCustomer": true
      },
      "Set Started_Media_0": {
        "position": {
          "x": 502.4,
          "y": 41.6
        },
        "isFriendlyName": true
      },
      "SetInitialAgentProcessing": {
        "position": {
          "x": 735.2,
          "y": 42.4
        },
        "isFriendlyName": true
      },
      "SetErrorMessage": {
        "position": {
          "x": 1617.6,
          "y": 581.6
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "PullAction": {
        "position": {
          "x": 1462.4,
          "y": 99.2
        },
        "isFriendlyName": true,
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "generativeagent-quickstart-lambda-pullaction"
          },
          "LambdaInvocationAttributes": {
            "companyMarker": {
              "useDynamic": true
            },
            "guid": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "companyMarker": true,
          "guid": true
        }
      },
      "Engage": {
        "position": {
          "x": 952,
          "y": 44
        },
        "isFriendlyName": true,
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "generativeagent-quickstart-lambda-genagent-engage"
          }
        },
        "dynamicMetadata": {}
      },
      "DidModuleStartMediaStreaming": {
        "position": {
          "x": 1283.2,
          "y": 856.8
        },
        "isFriendlyName": true,
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "8487ee11-4da1-4d7a-ba9c-727e4c5efd2a",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "1"
          }
        ]
      },
      "79f0f5ee-e931-45cc-b6d5-504771b08c80": {
        "position": {
          "x": 1193.6,
          "y": 44.8
        },
        "conditionMetadata": [
          {
            "id": "ec254f10-e9e7-4fce-900a-915459e85155",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "success"
          }
        ]
      },
      "SetErrorMessageEngage": {
        "position": {
          "x": 1232,
          "y": 357.6
        },
        "isFriendlyName": true,
        "dynamicParams": []
      },
      "Wait1sPrompt": {
        "position": {
          "x": 2460.8,
          "y": -764.8
        },
        "isFriendlyName": true,
        "parameters": {
          "PromptId": {
            "displayName": "asappSilence1second"
          }
        },
        "promptName": "asappSilence1second"
      },
      "be130246-2564-413c-8ef8-a7d7db9427fc": {
        "position": {
          "x": 1492,
          "y": -537.6
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "1ab35e89-90ae-4192-87e8-7916f4e2243b",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "none"
          },
          {
            "id": "70bd9baa-473a-40e2-a901-570bd7fe87e3",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "speak"
          },
          {
            "id": "4f5fcb09-c39d-4518-a24e-b51a382f9dc5",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "transferToAgent"
          },
          {
            "id": "edb32741-af60-4e57-b5ec-489757693d1a",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "processingStart"
          },
          {
            "id": "efc6f54e-3b06-4970-b8eb-41ec72472fe2",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "processingEnd"
          },
          {
            "id": "b6c082b0-c9fe-4f66-9611-ff89c1fc8faf",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "disengage"
          },
          {
            "id": "5d74cf7c-cc40-4bbb-9a6b-807a093e904d",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "error"
          },
          {
            "id": "6bad185f-2935-4768-9cd7-76c26a39e1ff",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "transferToSystem"
          }
        ]
      },
      "PlayBeepBopShort": {
        "position": {
          "x": 2764,
          "y": -947.2
        },
        "isFriendlyName": true,
        "parameters": {
          "PromptId": {
            "displayName": "asappBeepBop"
          }
        },
        "promptName": "asappBeepBop"
      },
      "Wait400msPrompt": {
        "position": {
          "x": 2766.4,
          "y": -761.6
        },
        "isFriendlyName": true,
        "parameters": {
          "PromptId": {
            "displayName": "asappSilence400ms"
          }
        },
        "promptName": "asappSilence400ms"
      },
      "2acc361b-1744-4c88-ba67-74d00a7e2100": {
        "position": {
          "x": 2051.2,
          "y": -962.4
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "97fde7cd-1522-458d-925f-c05e4ea50c15",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "1"
          },
          {
            "id": "ff820566-a816-48bf-aa8b-d086ef34f01e",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "0"
          }
        ]
      },
      "a2dbb45d-0573-4b39-bf5d-adb51762091e": {
        "position": {
          "x": 2477.6,
          "y": -979.2
        },
        "conditions": [],
        "conditionMetadata": [
          {
            "id": "7ff84a83-af79-4861-a411-427ae4fe60d2",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "1"
          }
        ]
      }
    },
    "Annotations": [
      {
        "type": "default",
        "id": "9d1ea13f-227e-4471-8da9-2183d3cadcd8",
        "content": "Constantly pull for next action and process it accordingly. The actions of transferToAgent, disengage or error will cause the exit from the polling loop.",
        "actionId": "PullAction",
        "isFolded": true,
        "position": {
          "x": 1847.1666666666667,
          "y": 330.66666666666663
        },
        "size": {
          "height": 295,
          "width": 300
        }
      },
      {
        "type": "default",
        "id": "a65a3e4f-9a1f-4f2c-b34c-f903903add54",
        "content": "Must set the following User Defined attribute values before calling this module:\nASAPP_CompanyMarker - should be set to ASAPP configured value as communicated by ASAPP\n",
        "actionId": "",
        "isFolded": false,
        "position": {
          "x": -56,
          "y": -330
        },
        "size": {
          "height": 295,
          "width": 300
        }
      },
      {
        "type": "default",
        "id": "fa63b53a-7459-4047-8094-a813d9da5c1b",
        "content": "Output Attributes set on Contact:\nASAPP_Disposition\nASAPP_ErrorMessage",
        "actionId": "",
        "isFolded": false,
        "position": {
          "x": 310,
          "y": -331
        },
        "size": {
          "height": 295,
          "width": 300
        }
      },
      {
        "type": "default",
        "id": "9e51f9a1-ed78-4a2f-91e7-0726cc78f316",
        "content": "playBeepBop is returned by pullAction lambda and will be set to 1 whenever \"thinking\" sounds should be played",
        "actionId": "a2dbb45d-0573-4b39-bf5d-adb51762091e",
        "isFolded": true,
        "position": {
          "x": 3092.5,
          "y": -996
        },
        "size": {
          "height": 295,
          "width": 300
        }
      },
      {
        "type": "default",
        "id": "34da16d8-b4c5-4a43-b0db-621aa99e717d",
        "content": "Extract output variables here, use $.External.outputVariables.<variableName> where <variableName> is what the name of the variable you've set in the Set Variables part of System Transfer function in GenerativeAgent. All variable names are case-sensitive.",
        "actionId": "ExtractOutputVariables",
        "isFolded": false,
        "position": {
          "x": 4391.5,
          "y": 249
        },
        "size": {
          "height": 295,
          "width": 300
        }
      }
    ],
    "name": "generativeagent-sadevelop-contact-flow-module",
    "description": "",
    "status": "published",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {},
      "Identifier": "b17292d8-e828-4110-ad5c-7b35ad48bc73",
      "Type": "EndFlowModuleExecution",
      "Transitions": {}
    },
    {
      "Parameters": {
        "MediaStreamingState": "Disabled",
        "Participants": [
          {
            "ParticipantType": "Customer",
            "MediaDirections": [
              "To",
              "From"
            ]
          }
        ],
        "MediaStreamType": "Audio"
      },
      "Identifier": "c78f56bf-b6d0-477d-b1f7-de15b88cfa18",
      "Type": "UpdateContactMediaStreamingBehavior",
      "Transitions": {
        "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
        "Errors": [
          {
            "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_ErrorMessage": "$.External.text"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetErrorMessage2",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_Disposition": "transferToAgent"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetDispositionTransferToAgent",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming2",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "9c7b3530-d748-4efe-9a10-77fcf798042f",
      "Type": "EndFlowModuleExecution",
      "Transitions": {}
    },
    {
      "Parameters": {
        "MediaStreamingState": "Disabled",
        "Participants": [
          {
            "ParticipantType": "Customer",
            "MediaDirections": [
              "To",
              "From"
            ]
          }
        ],
        "MediaStreamType": "Audio"
      },
      "Identifier": "dd28ca32-d638-49e9-8825-9de55be49cea",
      "Type": "UpdateContactMediaStreamingBehavior",
      "Transitions": {
        "NextAction": "9c7b3530-d748-4efe-9a10-77fcf798042f",
        "Errors": [
          {
            "NextAction": "9c7b3530-d748-4efe-9a10-77fcf798042f",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_Disposition": "disengage"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetDispositionDisengage",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming2",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_Disposition": "transferToSystem"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetDispositionTransferToSystem",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "ExtractOutputVariables",
        "Errors": [
          {
            "NextAction": "ExtractOutputVariables",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.FlowAttributes.ASAPP_Started_Media"
      },
      "Identifier": "DidModuleStartMediaStreaming2",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "9c7b3530-d748-4efe-9a10-77fcf798042f",
        "Conditions": [
          {
            "NextAction": "dd28ca32-d638-49e9-8825-9de55be49cea",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "1"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "9c7b3530-d748-4efe-9a10-77fcf798042f",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_Disposition": "$.Attributes.ASAPP_Disposition"
        },
        "TargetContact": "Current"
      },
      "Identifier": "ExtractOutputVariables",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming2",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_ErrorMessage": "flow module error"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetErrorMessage3",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_Disposition": "error"
        },
        "TargetContact": "Current"
      },
      "Identifier": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "b17292d8-e828-4110-ad5c-7b35ad48bc73",
        "Errors": [
          {
            "NextAction": "b17292d8-e828-4110-ad5c-7b35ad48bc73",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowAttributes": {
          "ASAPP_Started_Media": {
            "Value": "1"
          }
        }
      },
      "Identifier": "Set Started_Media_1",
      "Type": "UpdateFlowAttributes",
      "Transitions": {
        "NextAction": "32cb9b6f-b1ae-4c26-8cee-c61fe450b996",
        "Errors": [
          {
            "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.MediaStreams.Customer.Audio.StreamARN"
      },
      "Identifier": "CheckIfMediaStreamingStarted",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "Set Started_Media_1",
        "Conditions": [
          {
            "NextAction": "Set Started_Media_0",
            "Condition": {
              "Operator": "TextContains",
              "Operands": [
                "arn:aws"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Set Started_Media_1",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowAttributes": {
          "genagentProcessing": {
            "Value": "0"
          }
        }
      },
      "Identifier": "ClearAgentProcessing",
      "Type": "UpdateFlowAttributes",
      "Transitions": {
        "NextAction": "PullAction",
        "Errors": [
          {
            "NextAction": "SetErrorMessage3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.text"
      },
      "Identifier": "SpeakResponse",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "PullAction",
        "Errors": [
          {
            "NextAction": "SetErrorMessage3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowAttributes": {
          "genagentProcessing": {
            "Value": "1"
          }
        }
      },
      "Identifier": "SetAgentProcessing",
      "Type": "UpdateFlowAttributes",
      "Transitions": {
        "NextAction": "PullAction",
        "Errors": [
          {
            "NextAction": "SetErrorMessage3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MediaStreamingState": "Enabled",
        "MediaStreamType": "Audio",
        "Participants": [
          {
            "ParticipantType": "Customer",
            "MediaDirections": [
              "From"
            ]
          }
        ]
      },
      "Identifier": "32cb9b6f-b1ae-4c26-8cee-c61fe450b996",
      "Type": "UpdateContactMediaStreamingBehavior",
      "Transitions": {
        "NextAction": "SetInitialAgentProcessing",
        "Errors": [
          {
            "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowAttributes": {
          "ASAPP_Started_Media": {
            "Value": "0"
          }
        }
      },
      "Identifier": "Set Started_Media_0",
      "Type": "UpdateFlowAttributes",
      "Transitions": {
        "NextAction": "SetInitialAgentProcessing",
        "Errors": [
          {
            "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowAttributes": {
          "genagentProcessing": {
            "Value": "1"
          }
        }
      },
      "Identifier": "SetInitialAgentProcessing",
      "Type": "UpdateFlowAttributes",
      "Transitions": {
        "NextAction": "Engage",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_ErrorMessage": "Unknown next action $.External.next"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetErrorMessage",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "asapp-generativeagent-pullaction-lambda-arn",
        "InvocationTimeLimitSeconds": "3",
        "LambdaInvocationAttributes": {
          "companyMarker": "$.Attributes.ASAPP_CompanyMarker",
          "guid": "$.ContactId"
        },
        "ResponseValidation": {
          "ResponseType": "JSON"
        }
      },
      "Identifier": "PullAction",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "be130246-2564-413c-8ef8-a7d7db9427fc",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "asapp-generativeagent-engage-lambda-arn",
        "InvocationTimeLimitSeconds": "8",
        "ResponseValidation": {
          "ResponseType": "JSON"
        }
      },
      "Identifier": "Engage",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "79f0f5ee-e931-45cc-b6d5-504771b08c80",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.FlowAttributes.ASAPP_Started_Media"
      },
      "Identifier": "DidModuleStartMediaStreaming",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
        "Conditions": [
          {
            "NextAction": "c78f56bf-b6d0-477d-b1f7-de15b88cfa18",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "1"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "7c3b2393-e75a-4c0f-bda3-ed09de7d0b97",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.result"
      },
      "Identifier": "79f0f5ee-e931-45cc-b6d5-504771b08c80",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "SetErrorMessageEngage",
        "Conditions": [
          {
            "NextAction": "PullAction",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "success"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "SetErrorMessageEngage",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ASAPP_ErrorMessage": "$.External.errorMessage"
        },
        "TargetContact": "Current"
      },
      "Identifier": "SetErrorMessageEngage",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "DidModuleStartMediaStreaming",
        "Errors": [
          {
            "NextAction": "DidModuleStartMediaStreaming",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "PromptId": "asappSilence1s"
      },
      "Identifier": "Wait1sPrompt",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "PullAction",
        "Errors": [
          {
            "NextAction": "SetErrorMessage3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.next"
      },
      "Identifier": "be130246-2564-413c-8ef8-a7d7db9427fc",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "SetErrorMessage",
        "Conditions": [
          {
            "NextAction": "2acc361b-1744-4c88-ba67-74d00a7e2100",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "none"
              ]
            }
          },
          {
            "NextAction": "SpeakResponse",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "speak"
              ]
            }
          },
          {
            "NextAction": "SetDispositionTransferToAgent",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "transferToAgent"
              ]
            }
          },
          {
            "NextAction": "SetAgentProcessing",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "processingStart"
              ]
            }
          },
          {
            "NextAction": "ClearAgentProcessing",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "processingEnd"
              ]
            }
          },
          {
            "NextAction": "SetDispositionDisengage",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "disengage"
              ]
            }
          },
          {
            "NextAction": "SetErrorMessage2",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "error"
              ]
            }
          },
          {
            "NextAction": "SetDispositionTransferToSystem",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "transferToSystem"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "SetErrorMessage",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "PromptId": "asappBeepBop"
      },
      "Identifier": "PlayBeepBopShort",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "PullAction",
        "Errors": [
          {
            "NextAction": "SetErrorMessage3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "PromptId": "asappSilence400ms"
      },
      "Identifier": "Wait400msPrompt",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "PullAction",
        "Errors": [
          {
            "NextAction": "SetErrorMessage3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.FlowAttributes.genagentProcessing"
      },
      "Identifier": "2acc361b-1744-4c88-ba67-74d00a7e2100",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "Wait1sPrompt",
        "Conditions": [
          {
            "NextAction": "a2dbb45d-0573-4b39-bf5d-adb51762091e",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "1"
              ]
            }
          },
          {
            "NextAction": "Wait1sPrompt",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "0"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Wait1sPrompt",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.playBeepBop"
      },
      "Identifier": "a2dbb45d-0573-4b39-bf5d-adb51762091e",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "Wait400msPrompt",
        "Conditions": [
          {
            "NextAction": "PlayBeepBopShort",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "1"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "Wait400msPrompt",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    }
  ],
  "Settings": {
    "InputParameters": [],
    "OutputParameters": [],
    "Transitions": [
      {
        "DisplayName": "Success",
        "ReferenceName": "Success",
        "Description": ""
      },
      {
        "DisplayName": "Error",
        "ReferenceName": "Error",
        "Description": ""
      }
    ]
  }
}